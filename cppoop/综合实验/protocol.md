# Protocol

## 数据结构

### 闯关者状态
```
(等级) (经验值) (下一级目标经验值) (闯过关卡数)
```

### 出题者状态
```
(等级) (出题数) (下一级目标出题数)
```

## 数据包
### 注册 C
```
signup
(类型(0/1/2))
[账号]
[密码]
```

### 注册回应 S
```
signup_res
[错误信息，为success则成功]
```

### 登录 C
```
login
[账号]
[密码]
```

### 登录回应 S
```
login_res
[错误信息，为success则成功]
(类型(0/1/2)(仅成功时有))
{闯关者状态/出题者状态(仅成功时有)}
```

### 退出登陆 C
```
logout
```

### 开始一局游戏 C
```
play
```

### 发送题目 S
```
problem
[单词]
(关卡号) (轮数) (总轮数) (时间限制(单位为0.1s))
```

### 提交答案 C
```
submit
[单词]
```

### 判决回答 S
```
result
(结果(0/1))
(用时) (获得的经验) (重试次数)
{闯关者状态}
```

### 重试本关 C
```
retry
```

### 退出游戏 C
```
exit
```

### 开始匹配 C
```
start_match
```

### 结束匹配 C
```
stop_match
```


### 轮询是否匹配成功 C
```
poll_match
```

### 匹配回应 S
```
match_res
(结果(0/1))
[对手名称](匹配成功才有)
```

### 轮询对战判决回答 C
```
poll_result
```

### 对战判决回答 S
```
battle_result
(结果(0：错误，1:正确，2：对方错误，3：对方正确，4：对方离开)) (获得的经验)
{闯关者状态}
```

### 无对战判决回答 S
```
no_battle_result
```

### 出题 C
```
make_problem
[单词]
```

### 出题回应 S
```
make_problem_res
[错误信息，为success则成功]
{出题者状态}
```

### 请求用户列表 C
```
userlist
```

### 用户列表回应 S
```
userlist_res
(列表项数)
{内容}
```

对于每一项，若为闯关者： 
```
1
[名称]
{闯关者状态}
```

若为出题者： 
```
2
[名称]
{出题者状态}
```
